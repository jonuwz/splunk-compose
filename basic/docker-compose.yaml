version: '3.4'

networks:
  default:
    name: apps

services:

  sbs:
    image: local/splunk:8.2.6
    build:
      context: ../.images/splunk
      network: host
      args:
        VERSION: 8.2.6
        TOOL: splunk
    container_name: sbs
    hostname: sbs
    ports:
    - "8000:8000"
    - "8089:8089"
    - "8088:8088"
    environment:
      SPLUNK_DISABLE_POPUPS: "true"
      LANG: en_US.utf8
      SPLUNK_ROLE: splunk_standalone
      SPLUNK_START_ARGS: --accept-license
      SPLUNK_PASSWORD: password
      SPLUNK_HEC_TOKEN: password
    volumes:
    - ${HOME}/projects:/projects
  
  sbf:
    image: local/universalforwarder:8.2.6
    build:
      context: ../.images/splunk
      network: host
      args:
        VERSION: 8.2.6
        TOOL: universalforwarder
    container_name: sbf
    hostname: sbf
    environment:
      LANG: en_US.utf8
      SPLUNK_ROLE: splunk_universal_forwarder
      SPLUNK_START_ARGS: --accept-license
      SPLUNK_INDEXER_URL: sbs
      SPLUNK_PASSWORD: password
    volumes:
    - ${HOME}/projects:/projects
